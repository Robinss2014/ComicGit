<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>ComicGit</title>
		<!-- styles -->
		<link rel="stylesheet" type="text/css" href="/css/app.css" />
		<link rel="stylesheet" type="text/css" href="/css/bootstrap/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="/css/font-awesome.css" />
		<!-- library -->
		<script type="text/javascript" src="/js/lib/fabric.js"></script>
		<script type="text/javascript" src="/js/lib/jquery.min.js"></script>
	</head>
	<body>
		<!-- wrap -->
		<div class="wrap">
			<!-- header -->
			<header class="header">
				<div class="container text-center bottomShadow">
					<div class="row">
						<div class="col-xs-12">
							<h1>Edit Panel</h1>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-4 col-xs-offset-4">
							<a class="btn btn-default btn-lg btn-block" href="/index" role="button">Go HOME</a>
							<br>
						</div>
					</div>
				</div><!-- /.bottomShadow -->
			</header><!-- /.header -->
			
			<!-- main content -->
			<div class="container main">
				<div id="main">
					<br/>
					<br/>
					<div class="row">
						<div class="col-md-2">
							<div class="form-group">
								<button class="btn btn-default" id="left">prev</button>
							</div>
						</div>
						<div class="col-md-8 imgdiv"  style="height :500px;background-color:yellow">
							<img id="slide" />
						</div>
						<div class="col-md-2">
							<div class="form-group">
								<button class="btn btn-default" id="right">next</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- footer -->
		<footer class="footer">
			<div class="container topShadow">
				<div class="row text-center">
					<div class="col-xs-12">
						<br>
						ComicGit: a CSC690 final project by <a href="http://robinss.com" target="_blank">Sisi Wei</a> and Sylvain Ribstein<br>
						Documentation on <a href="https://docs.google.com/document/d/1Fq9K9efgS_MVmtmGSNIfi8MJMKnA9rFwhu78Fg5DSU0/edit?usp=sharing" target="_blank">Google Doc</a><br>
						Code on <a href="https://github.com/Robinss2014/ComicGit" target="_blank">GitHub</a><br>
					</div>
				</div>
			</div>
		</footer><!-- /.footer -->

	</body>
	<script>
	$(document).ready(function(){

		var u=$(location).attr('href').split('/');
		if(u[u.length-1]===""){
			u=u.slice(0,u.length-1);
		}
		var i =0;
		while(u[i]!="slideshow"){
			i++;
		}
		u=u.slice(i+1,u.length);
		panels="";
		$.ajax({
			type: 'GET',
			url: '/panel/pathpanel/'+u[0]+'/'+u[1],
			data: { get_param: 'path' },
			dataType:'json',
			success: function (data) {
				panels=data.path.split('/');
				display(panels);
			}
		});

	});
	function chargeImg(index,panels){
//		$("#main").append("<div>panel src : "+panels.slice(0,index+1).join('/')+"/"+panels[index]+"</div>");
		$("#slide")[0].src=panels.slice(0,index+1).join('/')+"/"+panels[index]+".png";
	}
	
	function display(panels){
		//$("#main").append("<div>"+panels.join('/')+"</div>");

		var index=2;



		var left=$('#left')[0];
		var right=$('#right')[0];

		chargeImg(index,panels);
		
		right.onclick=function(){
			if(index<panels.length-1){
				index++;
				chargeImg(index,panels);
			}
		};
		left.onclick=function(){
			if(index>2){
				index--;
				chargeImg(index,panels);
		   }
		};
	}
	
	</script>
</html>

